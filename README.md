# Media-analyzer
Media-analyzer — это сервис, который анализирует аудио или видео, ищет заданные фразы, делает превью-фрагменты и выделяет тематические блоки по содержанию.
Проект объединяет обработку речи, анализ текста и эмбеддинги для поиска и сегментации контента.
## Возможности
#### /speach
Принимает текстовый запрос и путь к аудио/видео.
Находит фразы или слова в расшифрованной речи и возвращает тайм-коды.
#### Пример запроса:
```bash
curl -X POST http://localhost:8080/search \
  -F "phrase=valve" \
  -F "url=https://www.youtube.com/watch?v=J8fH4nGAIaE"
```
#### Ответ:
```json
{
  "phrase":"valve",
  "hits": [
    "0.16 --> 5.54","11.20 --> 13.86","24.02 --> 26.84",
    "38.07 --> 49.98","126.76 --> 135.42","136.92 --> 141.25",
    "141.25 --> 144.60","161.32 --> 167.81"
  ]
}
```
---

#### /preview

Создаёт нарезки видео/аудио по найденным фразам.
Используется для генерации тематических превью — коротких фрагментов, где встречается заданная фраза.

#### Пример запроса:
```bash
 curl -X POST            
  -F "url=https://www.youtube.com/watch?v=J8fH4nGAIaE" 
  -F "phrase=valve"                                              
  http://localhost:8080/preview 
  -o preview.zip
```
#### Ответ: 
Зип архив лежащий по пути указанному во флаге -o.

----

#### /themes

Определяет темы (топики) в видео или аудио.
Анализирует текст по эмбеддингам, объединяет близкие по смыслу предложения и возвращает тематическую сегментацию.

#### Пример запроса:
```bash
curl -X POST http://localhost:8080/themes \
  -F "url=https://example.com/video.mp4"
```
#### Ответ:
```json
{
  "segments": [
    { "topic_id": 1, "start": 0, "end": 60, "text": "Introduction to AI" },
    { "topic_id": 2, "start": 61, "end": 180, "text": "Machine learning basics" }
  ]
}
```
----

## Используемые технологии
-	Go — основной язык проекта.
-	Deepgram API — для автоматического распознавания речи.
-	Jina AI Embeddings — для вычисления текстовых эмбеддингов и тематической кластеризации.
-	FFmpeg — для нарезки и обработки аудио/видео фрагментов.
-	OpenAI tiktoken / cosine similarity — для анализа контекста и поиска смысловых близостей (опционально).

## Установка
  1. Клонируй репозиторий:
  ```bash
  git clone https://github.com/username/TopicSlice.git
  cd TopicSlice
  ```
  2.	Создай .env файл и добавь ключи:
  ```
  DEEPGRAM_API_KEY=...
  JINA_API_KEY=...
  ```
  3.	Установи зависимости:
  ```bash
  go mod tidy
  ```
  4.	Запусти сервер:
  ```bash
  go run main.go
  ```
  